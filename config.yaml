# Configuration for run_slim_vast.py
# Commit this file to Git and push to GitLab
# Container will read fresh config on every restart

repo_url: "https://github.com/zerotouchprod/vastai_inerup"
config_url: "https://gist.githubusercontent.com/zerotouchprod/56872fc774442b627dbf2e658d03d19c/raw/config.json"
image: "ghcr.io/zerotouchprod/pytorch-fat-07110957:latest"

# ==================== PREDEFINED PRESETS ====================
presets:
  low:
    preset: "low"
    min_vram: 12
    gpu_models:
      - "RTX_3060_Ti"
      - "RTX_3070"
      - "RTX_2080_Ti"
    gpu_whitelist: []
    gpu_blacklist: []
    gpu_required: false
    gpu_priority: true
    min_price: 0.08
    max_price: 0.25
    min_reliability: 0.70
    min_dlperf: 20
    min_cuda: 11.0
    compute_cap: 700
    min_inet_down: 50
    min_inet_up: 25
    min_cpu_cores: 4
    min_cpu_ram: 16
    datacenter: false
    verified: false
    type: "bid"
    wait: false
    download: true

  balanced:
    preset: "balanced"
    min_vram: 16
    gpu_models:
      - "RTX_3080"
      - "RTX_3080_Ti"
      - "RTX_3090"
      - "RTX_4070_Ti"
      - "RTX_4080"
      - "A100"
    gpu_whitelist: []
    gpu_blacklist: []
    gpu_required: false
    gpu_priority: true
    min_price: 0.12
    max_price: 0.50
    min_reliability: 0.80
    min_dlperf: 35
    min_dlperf_per_dphtotal: 100
    min_cuda: 11.2
    compute_cap: 750
    min_inet_down: 100
    min_inet_up: 50
    min_cpu_cores: 6
    min_cpu_ram: 20
    min_disk_bw: 100
    min_gpu_mem_bw: 400
    datacenter: false
    verified: true
    type: "bid"
    wait: false
    download: true

  high:
    preset: "high"
    min_vram: 24
    gpu_models:
      - "RTX_4090"
      - "RTX_A6000"
      - "RTX_3090"
      - "A100"
      - "A40"
    gpu_whitelist: []
    gpu_blacklist: []
    gpu_required: false
    gpu_priority: true
    min_price: 0.25
    max_price: 0.90
    min_reliability: 0.98
    min_dlperf: 60
    min_dlperf_per_dphtotal: 150
    min_cuda: 11.7
    compute_cap: 800
    min_inet_down: 200
    min_inet_up: 100
    min_cpu_cores: 8
    min_cpu_ram: 32
    min_disk_bw: 500
    min_gpu_mem_bw: 600
    min_pcie_gen: 4
    datacenter: true
    verified: true
    static_ip: true
    type: "on-demand"
    wait: false
    download: true

# ==================== PRESET: BALANCED ====================
vast:
  preset: "balanced"
  #num_gpus: 1
  gpu_models:
    - "RTX_3080"
    - "RTX_3090"
  gpu_whitelist: []
  gpu_blacklist: []
  gpu_required: false
  gpu_priority: true
  min_vram: 24
  min_price: 0.05
  max_price: 0.1
  min_reliability: 0.95      # Increased from 0.90
  min_dlperf: 40             # Increased from 35
  min_dlperf_per_dphtotal: 100
  min_cuda: 11.2
  compute_cap: 750
  min_inet_down: 100
  min_inet_up: 50
  min_cpu_cores: 6
  min_cpu_ram: 20
  min_disk_bw: 100
  min_gpu_mem_bw: 400
  datacenter: true           # Changed from false
  verified: true
  type: "bid"
  wait: false
  download: true
  # Request allocated storage (GB) for created instances to avoid small-disk hosts
  allocated_storage: 100
  host_whitelist:
    - 51345
    - 78246
    - 124171
    - 67268
    - 85538
    - 84962 #ua
    - 264182
    - 150602
    - 67268
    - 280301 #2cpu
    - 160473 #2cpu
  # Blacklist of host IDs to ignore when searching offers (vasts.host_blacklist)
  host_blacklist:
    - 160473 #$0.26/hr 2cpu
    - 34742 #$0.23/hr
    - 51981 #$0.215/hr
    - 124072 #$0.198/hr
    - 155386
    - 319870
    - 124171
    - 81456
    - 28229362
    - 28230170 #expensive

b2:
  bucket: "noxfvr-videos"
  endpoint: "https://s3.us-west-004.backblazeb2.com"

# Advanced settings
advanced:
  # Backend preference: auto, pytorch, ncnn, ffmpeg
  prefer: "auto"

  # Strict mode: fail if GPU not available (default: false for fallback support)
  # Set to true only if you want to fail immediately when GPU processing fails
  strict: false

  # Low-res strategy: interp-then-upscale (fast, default) or upscale-then-interp
  lowres_strategy: "interp-then-upscale"